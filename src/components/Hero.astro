---
import { getTranslations, type Language } from "../i18n/config";
import { Image } from "astro:assets";

interface Props {
    lang: Language;
}

const { lang } = Astro.props;
const t = await getTranslations(lang);

const ctaButtons = [
    {
        text: t.hero.cta.projects,
        href: lang === "es" ? "/projects" : "/en/projects",
        primary: false,
    },
    {
        text: t.hero.cta.whatsapp,
        href: "https://wa.me/message/3O565QQ2YC35O1",
        primary: false,
        external: true,
    },
    {
        text: t.hero.cta.meeting,
        href: lang === "es" ? "/contact#calendar" : "/en/contact#calendar",
        primary: true,
    },
];
---

<section class="hero parallax" data-parallax="hero">
    <div class="container">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title animate-fade-in-up">
                    {t.hero.title}
                </h1>
                <p class="hero-subtitle animate-fade-in-up delay-100">
                    {t.hero.subtitle}
                </p>
                <div class="hero-cta animate-fade-in-up delay-200">
                    {
                        ctaButtons.map((button, idx) => (
                            <a
                                href={button.href}
                                class={`btn ${button.primary ? "btn-primary vibrate-pulse" : "btn-outline"} btn-lg ${idx === 2 ? "btn-meeting" : ""}`}
                                target={button.external ? "_blank" : undefined}
                                rel={button.external ? "noopener" : undefined}
                            >
                                {idx === 2 ? (
                                    <>
                                        <span class="desktop-meeting-text">{button.text}</span>
                                        <span class="tablet-meeting-text">{lang === "es" ? "Reservar cita" : "Book appointment"}</span>
                                    </>
                                ) : (
                                    button.text
                                )}
                            </a>
                        ))
                    }
                </div>
            </div>

            <div class="hero-image animate-fade-in delay-300">
                <Image
                    src="/images/miguel-ortegadev-com-developer.webp"
                    alt="Miguel Ángel Ortega Ibáñez"
                    width={500}
                    height={500}
                    format="webp"
                    quality={85}
                    loading="eager"
                />
                <div class="hero-image-gradient"></div>
            </div>
        </div>
    </div>
</section>

<style lang="scss">
    @import "../styles/tokens.scss";

    .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        background: linear-gradient(
            180deg,
            var(--color-bg-primary) 0%,
            var(--color-bg-secondary) 100%
        );
        padding: $spacing-10 0;
        will-change: transform, opacity;
        transform: translateZ(0);
        backface-visibility: hidden;
    }

    .hero-content {
        display: grid;
        grid-template-columns: 1fr;
        gap: $spacing-10;
        align-items: center;

        @media (min-width: $breakpoint-lg) {
            grid-template-columns: 1fr 1fr;
            gap: $spacing-12;
        }
    }

    .hero-text {
        text-align: center;

        @media (min-width: $breakpoint-lg) {
            text-align: left;
        }
    }

    .hero-title {
        font-size: $font-size-4xl;
        font-weight: $font-weight-bold;
        line-height: $line-height-tight;
        margin-bottom: $spacing-6;
        background: $gradient-hero;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;

        @media (min-width: $breakpoint-md) {
            font-size: $font-size-5xl;
        }

        @media (min-width: $breakpoint-lg) {
            font-size: $font-size-6xl;
        }
    }

    .hero-subtitle {
        font-size: $font-size-lg;
        line-height: $line-height-relaxed;
        color: var(--color-text-secondary);
        margin-bottom: $spacing-8;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;

        @media (min-width: $breakpoint-md) {
            font-size: $font-size-xl;
        }

        @media (min-width: $breakpoint-lg) {
            margin-left: 0;
            margin-right: 0;
        }
    }

    .hero-cta {
        display: flex;
        flex-direction: column;
        gap: $spacing-4;
        justify-content: center;
        align-items: stretch;

        @media (min-width: $breakpoint-md) {
            flex-direction: row;
            align-items: center;
        }

        @media (min-width: $breakpoint-lg) {
            justify-content: flex-start;
        }

        .btn-lg {
            flex: none;
            width: 80%;
            margin: 0 auto;
            min-width: 150px;

            @media (min-width: $breakpoint-md) {
                flex: 0 1 calc(33.333% - 10px);
                width: auto;
                margin: 0;
            }
        }

        .btn-meeting {
            @media (min-width: $breakpoint-md) {
                margin-left: auto;
            }
        }
    }

    .hero-image {
        position: relative;
        max-width: 500px;
        margin: 0 auto;

        img {
            width: 100%;
            height: auto;
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            box-shadow: $shadow-2xl;
            animation: blob-morph 8s ease-in-out infinite;
        }

        &::before {
            content: "";
            position: absolute;
            top: -20px;
            left: -20px;
            right: 20px;
            bottom: 20px;
            background: $gradient-hero;
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            z-index: -1;
            opacity: 0.3;
            filter: blur(40px);
            animation: blob-morph-shadow 8s ease-in-out infinite;
        }
    }

    @keyframes blob-morph {
        0% {
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }
        25% {
            border-radius: 30% 60% 70% 40% / 40% 30% 60% 70%;
        }
        50% {
            border-radius: 40% 60% 30% 70% / 70% 40% 60% 30%;
        }
        75% {
            border-radius: 70% 30% 66% 33% / 33% 30% 67% 70%;
        }
        100% {
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }
    }

    .desktop-meeting-text {
        display: none;

        @media (max-width: $breakpoint-md - 1px), (min-width: 1200px) {
            display: inline;
        }
    }

    .tablet-meeting-text {
        display: none;

        @media (min-width: $breakpoint-md) and (max-width: 1199px) {
            display: inline;
        }
    }

    @keyframes blob-morph-shadow {
        0% {
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }
        25% {
            border-radius: 30% 60% 70% 40% / 40% 30% 60% 70%;
        }
        50% {
            border-radius: 40% 60% 30% 70% / 70% 40% 60% 30%;
        }
        75% {
            border-radius: 70% 30% 66% 33% / 33% 30% 67% 70%;
        }
        100% {
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }
    }
</style>
