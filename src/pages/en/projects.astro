---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getTranslations } from "../../i18n/config";
import ProjectsGrid from "../../components/ProjectsGrid";

const lang = "en";
const t = await getTranslations(lang);

const title = `${t.projects.title} | ortegadev.com`;
const description =
    "Featured projects: ReviCar, Secret Santa Raffle, AI automation and more. Examples of my work as a Full Stack Developer.";

const projects = [
  {
    id: "revicar",
    title: "ReviCar",
    description: "Intelligent vehicle management platform with predictive AI. Native iOS/Android apps + Web with Supabase.",
    image: "/images/projects/revicar/revicar-vista-escritorio.webp",
    tags: ["React", "TypeScript", "Supabase", "AI", "Mobile", "Capacitor"],
    url: "https://revicarapp.com",
    github: "https://github.com/miguelicosan/car-care-companion-app",
    year: 2025,
    status: "Development",
    detailPage: "/en/projects/revicar",
    content: `
      <h3>The first app with AI for predictive vehicle management</h3>
      
      <p><strong>ReviCar</strong> revolutionizes vehicle maintenance management through predictive AI algorithms. It calculates automatic savings, predicts future costs, and optimizes vehicle care in real-time.</p>

      <h4>Key Technical Features</h4>
      <ul>
        <li><strong>Predictive AI</strong>: Dynamic score (0-100) based on compliance, AI accuracy, vehicle status and cost optimization</li>
        <li><strong>Vehicle Database</strong>: 68 brands, 576 models from 1980 to 2025</li>
        <li><strong>Native Apps</strong>: iOS and Android from same codebase with Capacitor.js</li>
        <li><strong>Robust Authentication</strong>: OAuth social login (Google, Apple) with email verification</li>
        <li><strong>Mobile-First Responsive</strong>: Optimized for all devices</li>
      </ul>

      <h4>Tech Stack</h4>
      <p><strong>Frontend</strong>: React 18 + TypeScript + Vite + Tailwind CSS + shadcn/ui<br/>
      <strong>Mobile</strong>: Capacitor.js 7.4 (iOS/Android)<br/>
      <strong>Backend</strong>: Supabase (PostgreSQL) + Edge Functions<br/>
      <strong>AI</strong>: Predictive algorithms + OpenAI/Gemini<br/>
      <strong>DevOps</strong>: GitHub + Hostinger + SMTP</p>

      <h4>Results</h4>
      <ul>
        <li>50+ React components</li>
        <li>20+ routes/pages</li>
        <li>~15,000 lines of code</li>
        <li>100% TypeScript coverage</li>
        <li>Lighthouse Score: 95+</li>
        <li>Supports 2 languages (ES, EN)</li>
      </ul>
    `
  },
  {
    id: "amigo-invisible",
    title: "Secret Santa Raffle",
    description: "Create free and secure raffles with intelligent matching. Freemium model with BuyMeACoffee.",
    image: "/images/projects/amigo-invisible/sorteo-amigo-invisible-vista-escritorio.webp",
    tags: ["Astro", "Supabase", "TypeScript", "Edge Functions", "SEO"],
    url: "https://amigoinvisible.online",
    github: "https://github.com/miguelicosan/sorteoamigoinvisible.online",
    year: 2025,
    status: "Development",
    detailPage: "/en/projects/amigo-invisible",
    content: `
      <h3>Organize Secret Santa raffles in minutes, without complications</h3>
      
      <p>Modern web application to manage Secret Santa raffles safely, quickly and completely free. With freemium model, email personalization and intelligent matching algorithm that prevents self-assignments.</p>

      <h4>Key Technical Features</h4>
      <ul>
        <li><strong>Multi-Step Wizard</strong>: Intuitive configuration in 3 steps (Setup → Personalization → Review)</li>
        <li><strong>Derangement Algorithm</strong>: Intelligent circular matching without self-assignments</li>
        <li><strong>Customizable Emails</strong>: Dynamic variables ($NAME, $GIFT_FOR) with responsive templates</li>
        <li><strong>Restrictions System</strong>: Avoid specific pairs (couples, siblings, etc.)</li>
        <li><strong>Advanced RLS</strong>: Row Level Security in PostgreSQL for guaranteed privacy</li>
        <li><strong>SEO Optimized</strong>: Blog with 10+ articles, dynamic meta tags, sitemap</li>
        <li><strong>GDPR Compliant</strong>: Privacy policy, cookies, auto-deletion at 90 days</li>
      </ul>

      <h4>Tech Stack</h4>
      <p><strong>Frontend</strong>: Astro 5.16.3 + TypeScript + Vanilla CSS + Islands Architecture<br/>
      <strong>Backend</strong>: Supabase (PostgreSQL) + Edge Functions (Deno)<br/>
      <strong>Authentication</strong>: No registration (anonymous raffles)<br/>
      <strong>DevOps</strong>: Vercel/Netlify + GitHub</p>

      <h4>Results</h4>
      <ul>
        <li>5 reusable Astro components</li>
        <li>10+ pages (home, blog, legal, premium)</li>
        <li>3 Edge Functions in production</li>
        <li>~2,500 lines of code</li>
        <li>Performance: &lt;1s First Contentful Paint</li>
        <li>100% RLS security</li>
      </ul>
    `
  },
  {
    id: "ortegadev",
    title: "ortegadev.com",
    description: "This portfolio. Full Stack with Astro, smooth animations, SEO optimized and dark mode.",
    image: "/images/projects/ortegadev/ortegadev-screenshot.webp",
    tags: ["Astro", "React", "TypeScript", "SCSS", "View Transitions"],
    url: "https://ortegadev.com",
    github: "https://github.com/miguelicosan/ortegadev.com",
    year: 2025,
    status: "Production",
    detailPage: "/en/projects/ortegadev",
    content: `
      <h3>Modern professional portfolio with animations and complete SEO</h3>
      
      <p><strong>ortegadev.com</strong> is a portfolio designed to impress recruiters and clients. It implements best practices in web performance, SEO, accessibility and modern UX/UI.</p>

      <h4>Key Technical Features</h4>
      <ul>
        <li><strong>View Transitions API</strong>: Smooth navigation between pages without reloading</li>
        <li><strong>Scroll Animations</strong>: Parallax hero, scroll-reveal with IntersectionObserver</li>
        <li><strong>3D Tech Carousel</strong>: Interactive carousel with automatic rotation and controls</li>
        <li><strong>Dark Mode Only</strong>: Optimized dark theme without FOUC</li>
        <li><strong>Advanced Mobile Menu</strong>: Hamburger menu with spring animations and blur effect</li>
        <li><strong>Contact Form</strong>: Complete validation, WhatsApp integration</li>
        <li><strong>Professional SEO</strong>: Schema.org, hreflang, sitemap, robots.txt</li>
        <li><strong>Complete i18n</strong>: ES/EN support with clean routes</li>
      </ul>

      <h4>Tech Stack</h4>
      <p><strong>Framework</strong>: Astro v5 + React (interactive components)<br/>
      <strong>Styles</strong>: SCSS with CSS variables, responsive design<br/>
      <strong>Animations</strong>: CSS custom animations + requestAnimationFrame<br/>
      <strong>Contact</strong>: React Hook Form + Zod validation<br/>
      <strong>DevOps</strong>: GitHub + Automatic deployment<br/>
      <strong>SEO</strong>: Canonical URLs, hreflang, schema.org, noindex</p>

      <h4>Results</h4>
      <ul>
        <li>Lighthouse Score: 95+</li>
        <li>Mobile-first responsive design</li>
        <li>12 indexable pages + 6 legal (noindex)</li>
        <li>Smooth animations on all browsers</li>
        <li>0 CLS (Cumulative Layout Shift)</li>
        <li>TTL &lt;2s on 4G connections</li>
        <li>100% TypeScript coverage</li>
        <li>Modular and scalable code</li>
      </ul>
    `
  }
];

// CollectionPage + ItemList Schema for projects
const projectsSchema = {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Project Portfolio",
    "description": description,
    "url": "https://ortegadev.com/en/projects",
    "mainEntity": {
        "@type": "ItemList",
        "itemListElement": projects.map((project, index) => ({
            "@type": "SoftwareApplication",
            "position": index + 1,
            "name": project.title,
            "description": project.description,
            "url": project.url,
            "applicationCategory": "WebApplication",
            "author": {
                "@type": "Person",
                "name": "Miguel Ángel Ortega Ibáñez",
                "url": "https://ortegadev.com"
            },
            "image": `https://ortegadev.com${project.image}`,
            "datePublished": `${project.year}-01-01`,
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "EUR"
            }
        }))
    }
};
---

<BaseLayout title={title} description={description} lang={lang}>
    <section class="projects-page">
        <div class="container">
            <div class="projects-header">
                <h1>{t.projects.title}</h1>
                <p class="subtitle">Explore the projects I've worked on and discover the solutions I create.</p>
            </div>

            <ProjectsGrid client:load projects={projects} />

            <div class="cta-card">
                <h2>Every project is an opportunity to create something extraordinary</h2>
                <p class="cta-subtitle">I have experience transforming ideas into tech solutions that generate real business impact.</p>
                <a href="/en/contact" class="btn btn-primary btn-lg btn-text" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                    <span class="desktop-text">Let's discuss your next project</span>
                    <span class="mobile-text">Let's talk</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>
</BaseLayout>

<style lang="scss">
    @import "../../styles/tokens.scss";

    .projects-page {
        min-height: 100vh;
        padding-bottom: $spacing-12;
    }

    .projects-header {
        text-align: center;
        margin-bottom: $spacing-12;

        @media (min-width: $breakpoint-md) and (max-width: 1199px) {
            margin-bottom: $spacing-8;
        }

        h1 {
            margin-bottom: $spacing-4;

            @media (min-width: $breakpoint-md) and (max-width: 1199px) {
                font-size: 2.25rem;
                margin-bottom: $spacing-3;
            }

            @media (max-width: $breakpoint-sm) {
                font-size: 2.25rem;
            }
        }

        .subtitle {
            font-size: $font-size-lg;
            color: var(--color-text-secondary);
            width: 100%;
            margin: 0 auto;
            line-height: $line-height-relaxed;

            @media (min-width: $breakpoint-md) and (max-width: 1199px) {
                font-size: $font-size-base;
            }
        }
    }

    .cta-card {
        background: linear-gradient(135deg, rgba($color-brand-primary, 0.1) 0%, rgba($color-brand-secondary, 0.1) 100%);
        padding: $spacing-10;
        border-radius: $radius-xl;
        border: 1px solid rgba($color-brand-primary, 0.2);
        text-align: center;
        max-width: 800px;
        margin: $spacing-12 auto 0;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        color: var(--color-text-primary);

        @media (min-width: $breakpoint-md) and (max-width: 1199px) {
            padding: $spacing-6;
            margin: $spacing-8 auto 0;
        }

        @media (max-width: $breakpoint-sm) {
            padding: 2rem;
        }

        h2 {
            font-size: $font-size-3xl;
            margin-bottom: $spacing-4;
            color: var(--color-text-primary);

            @media (max-width: $breakpoint-md) {
                font-size: $font-size-2xl;
            }

            @media (max-width: $breakpoint-sm) {
                font-size: $font-size-xl;
            }
        }

        .cta-subtitle {
            font-size: $font-size-lg;
            color: var(--color-text-secondary);
            margin-bottom: $spacing-8;

            @media (max-width: $breakpoint-md) {
                font-size: $font-size-base;
            }

            @media (max-width: $breakpoint-sm) {
                font-size: $font-size-sm;
            }
        }

        .btn {
            display: inline-block;

            @media (max-width: $breakpoint-sm) {
                display: block;
                width: 100%;
                padding: $spacing-3 $spacing-4;
            }

            .desktop-text {
                display: inline;

                @media (max-width: $breakpoint-sm) {
                    display: none;
                }
            }

            .mobile-text {
                display: none;

                @media (max-width: $breakpoint-sm) {
                    display: inline;
                }
            }
        }
    }
</style>

<script type="application/ld+json" set:html={JSON.stringify(projectsSchema)} />

