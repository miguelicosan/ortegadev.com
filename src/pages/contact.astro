---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getTranslations } from "../i18n/config";
import WhatsAppButton from "../components/WhatsAppButton.astro";
import ContactForm from "../components/ContactForm";

const lang = "es";
const t = await getTranslations(lang);

const title = `${t.contact.title} | ortegadev.com`;
const description =
    "Contacta conmigo para tu próximo proyecto. Email, teléfono, WhatsApp o agenda una reunión online.";
---

<BaseLayout title={title} description={description} lang={lang}>
    <section class="contact-page py-12">
        <div class="container">
            <div class="contact-header">
                <h1>{t.contact.title}</h1>
                <p class="subtitle">{t.contact.subtitle}</p>
            </div>

            <div class="contact-grid">
                <div class="contact-info">
                    <h2>Información de contacto</h2>

                    <div class="contact-item">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path
                                d="M22 6L12 13L2 6"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <strong>{t.contact.info.email}</strong>
                            <p>
                                <a href="mailto:hola@ortegadev.com"
                                    >hola@ortegadev.com</a>
                            </p>
                            <p>
                                <a href="mailto:miguel@ortegadev.com"
                                    >miguel@ortegadev.com</a>
                            </p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M22 16.92V19.92C22 20.49 21.54 20.95 20.97 20.92C10.44 20.35 2.66 12.57 2.08 2.03C2.05 1.46 2.51 1 3.08 1H6.08C6.65 1 7.12 1.47 7.12 2.04C7.25 3.71 7.62 5.31 8.2 6.8C8.34 7.14 8.23 7.54 7.93 7.75L6.27 9C8.38 13.48 12.52 17.62 17 19.73L18.25 18.07C18.46 17.77 18.86 17.65 19.2 17.8C20.69 18.42 22.29 18.77 23.96 18.88C24.53 18.91 25 19.38 25 19.95V19.92Z"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <strong>{t.contact.info.phone}</strong>
                            <p>
                                <a href="tel:+34621329386">+34 621 329 386</a>
                            </p>
                            <p style="margin-top: 0.75rem;">
                                <a
                                    href="https://wa.me/34621329386?text=Hola%20Miguel%2C%20he%20visto%20tu%20web%20y%20me%20gustaría%20hablar%20contigo."
                                    class="btn btn-outline btn-sm"
                                    target="_blank"
                                    rel="noopener"
                                >
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.511-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.304-1.654a11.882 11.882 0 005.713 1.456h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path>
                                    </svg>
                                    WhatsApp
                                </a>
                            </p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M10 2C7 2 5 4 5 7C5 11 10 16 10 16C10 16 15 11 15 7C15 4 13 2 10 2Z"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <circle
                                cx="10"
                                cy="7"
                                r="2"
                                stroke="currentColor"
                                stroke-width="2"></circle>
                        </svg>
                        <div>
                            <strong>{t.contact.info.location}</strong>
                            <p>Almería, España</p>
                            <p style="font-size: 0.875rem; color: #6e6e73;">
                                {t.contact.info.availability}
                            </p>
                        </div>
                    </div>

                    <div class="contact-item" id="calendar">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <rect
                                x="3"
                                y="4"
                                width="18"
                                height="18"
                                rx="2"
                                stroke="currentColor"
                                stroke-width="2"></rect>
                            <path
                                d="M16 2V6M8 2V6M3 10H21"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"></path>
                        </svg>
                        <div>
                            <strong>{t.contact.calendar.title}</strong>
                            <p>{t.contact.calendar.description}</p>
                            <p style="margin-top: 0.5rem;">
                                <button
                                    class="btn btn-outline btn-sm"
                                    onclick="alert('TODO: Integrar con Calendly.\nPuedes añadir tu URL de Calendly en este archivo:\nsrc/pages/contact.astro')"
                                >
                                    {t.contact.calendar.button}
                                </button>
                            </p>
                        </div>
                    </div>

                    <div class="contact-item" id="social">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                            <path d="M8 12C8 9.79 9.79 8 12 8C14.21 8 16 9.79 16 12C16 14.21 14.21 16 12 16C9.79 16 8 14.21 8 12Z" stroke="currentColor" stroke-width="2"></path>
                            <circle cx="17" cy="7" r="1.5" fill="currentColor"></circle>
                        </svg>
                        <div>
                            <strong>Redes Sociales</strong>
                            <p>Sígueme en mis redes para contenido y actualizaciones.</p>
                            <div style="display: flex; gap: 0.75rem; margin-top: 0.75rem; flex-wrap: wrap;">
                                <a
                                    href="https://github.com/miguelicosan"
                                    class="btn btn-outline btn-sm"
                                    target="_blank"
                                    rel="noopener"
                                    title="GitHub"
                                >
                                    GitHub
                                </a>
                                <a
                                    href="https://linkedin.com/in/miguelortega"
                                    class="btn btn-outline btn-sm"
                                    target="_blank"
                                    rel="noopener"
                                    title="LinkedIn"
                                >
                                    LinkedIn
                                </a>
                                <a
                                    href="https://www.instagram.com/ortegadevcom/"
                                    class="btn btn-outline btn-sm"
                                    target="_blank"
                                    rel="noopener"
                                    title="Instagram"
                                >
                                    Instagram
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="contact-form-container">
                    <h2>Envíame un mensaje</h2>
                    <ContactForm client:load lang={lang} t={t} />
                </div>
            </div>
        </div>
    </section>
    <WhatsAppButton lang={lang} />
</BaseLayout>

<style lang="scss">
    @import "../styles/tokens.scss";

    .contact-page {
        min-height: 70vh;
    }

    .contact-header {
        text-align: center;
        margin-bottom: $spacing-10;

        h1 {
            margin-bottom: $spacing-4;
        }

        .subtitle {
            font-size: $font-size-xl;
            color: $color-text-secondary;
        }
    }

    .contact-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: $spacing-10;

        @media (min-width: $breakpoint-lg) {
            grid-template-columns: 1fr 1fr;
        }
    }

    .contact-info {
        h2 {
            margin-bottom: $spacing-6;
        }
    }

    .contact-item {
        display: flex;
        gap: $spacing-4;
        margin-bottom: $spacing-6;
        padding: $spacing-5;
        background-color: $color-bg-secondary;
        border-radius: $radius-lg;

        @media (prefers-color-scheme: dark) {
            background-color: #1d1d1f;
        }

        svg {
            color: $color-brand-primary;
            flex-shrink: 0;
        }

        strong {
            display: block;
            margin-bottom: $spacing-2;
            font-size: $font-size-lg;
        }

        p {
            margin-bottom: $spacing-1;
            line-height: $line-height-normal;
        }

        a {
            color: $color-brand-primary;
            text-decoration: none;

            &:hover {
                text-decoration: underline;
            }
        }
    }

    .contact-form-container {
        h2 {
            margin-bottom: $spacing-6;
        }
    }
</style>
